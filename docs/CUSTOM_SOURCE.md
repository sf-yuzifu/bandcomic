# è‡ªå®šä¹‰æ¼«ç”»æºé…ç½®æŒ‡å—

## å…³äºé…ç½®è‡ªå®šä¹‰æ¼«ç”»æºè¦æ±‚

### 1. åŸºæœ¬è¦æ±‚

1. æ¼«ç”»æºå¿…é¡»è¦æ”¯æŒSSLåè®®
2. æ¼«ç”»æºå¿…é¡»è¦åœ¨ `/config` è·¯ç”±è¾“å‡ºä»¥ä¸‹çš„é…ç½®æ–‡ä»¶

```json5
{
  "sourceName":{ // æ¼«ç”»æºåç§°
    "name":"sourceName", // æ¼«ç”»æºåç§°ï¼ˆè¿™è¡Œä¸ºä¸»ç•Œé¢æ˜¾ç¤ºçš„åç§°ï¼‰
    "apiUrl":"https://youapi.domain", // æ¼«ç”»æºåœ°å€
    "detailPath":"/comic/<id>", // æ¼«ç”»æºè¯¦æƒ…APIï¼Œ<id>ä¸ºæ¼«ç”»ID
    "photoPath":"/photo/<id>/chapter/<chapter>", // æ¼«ç”»æºè·å–æ¼«ç”»å›¾ç‰‡APIï¼Œ<id>ä¸ºæ¼«ç”»IDï¼Œ<chapter>ä¸ºç¬¬å‡ ç« 
    "searchPath":"/search/<text>/<page>", // æ¼«ç”»æºæœç´¢APIï¼Œ<text>ä¸ºæœç´¢å…³é”®è¯ï¼Œ<page>ä¸ºæœç´¢çš„ç¬¬å‡ é¡µ
    "type":"sourceType" // æ¼«ç”»æºåç§°
  }
}
```

### 2. APIè·¯ç”±è¾“å‡ºè§„åˆ™

#### detailPath

è·å–æ¼«ç”»è¯¦æƒ…ä¿¡æ¯ï¼Œç”¨äºåœ¨è¯¦æƒ…é¡µæ˜¾ç¤ºæ¼«ç”»çš„åŸºæœ¬ä¿¡æ¯ã€‚

```json5
{
  "item_id": 114514, // æ¼«ç”»IDï¼ˆå¿…éœ€ï¼‰
  "name": "comicName", // æ¼«ç”»åç§°ï¼ˆå¿…éœ€ï¼‰
  "page_count": 24, // æ¼«ç”»é¡µæ•°ï¼ˆå¿…éœ€ï¼‰
  "views": 1919810, // æ¼«ç”»æµè§ˆé‡ï¼ˆå¯é€‰ï¼‰
  "rate": 9.0, // æ¼«ç”»è¯„åˆ†ï¼ˆå¯é€‰ï¼‰
  "cover": "https://youapicover.domain", // æ¼«ç”»å°é¢ï¼ˆå¿…éœ€ï¼‰
  "tags": ["tag1", "tag2"], // æ¼«ç”»æ ‡ç­¾æ•°ç»„ï¼ˆå¯é€‰ï¼‰
  "total_chapters": 10 // æ€»ç« èŠ‚æ•°ï¼ˆå¯é€‰ï¼Œç”¨äºç« èŠ‚æ¼«ç”»ï¼‰
}
```

#### photoPath

è·å–æŒ‡å®šç« èŠ‚çš„å›¾ç‰‡åˆ—è¡¨ï¼Œç”¨äºåœ¨é˜…è¯»é¡µé¢æ˜¾ç¤ºæ¼«ç”»å†…å®¹ã€‚

> åœ¨1.6(50)ç‰ˆæœ¬ä¸­æ–°å¢äº†è°ƒæ•´å›¾ç‰‡å°ºå¯¸å¤§å°å’Œè´¨é‡çš„åŠŸèƒ½ï¼Œç›®å‰åšæ³•æ˜¯åœ¨`images`çš„æ¯ä¸ª`url`ä¸­æ·»åŠ `width`å’Œ`quality`ä¸¤ä¸ªå‚æ•°ï¼Œæ‰€ä»¥ä½ æä¾›çš„URLåœ°å€æœ€å¥½æ˜¯æœ‰è¿™ä¸ªåŠŸèƒ½çš„ã€‚

```json5
{
  "title": "comicName", // æ¼«ç”»åç§°ï¼ˆå¿…éœ€ï¼‰
  "images": [ // å›¾ç‰‡æ•°ç»„ï¼ˆå¿…éœ€ï¼‰
    {"url": "https://youapiphoto1.domain?width=600&quality=50"},
    {"url": "https://youapiphoto2.domain?width=600&quality=50"}
  ]
}
```

#### searchPath

æœç´¢æ¼«ç”»ï¼Œè¿”å›æœç´¢ç»“æœåˆ—è¡¨ã€‚

```json5
{
  "page": 1, // å½“å‰é¡µæ•°ï¼ˆå¿…éœ€ï¼‰
  "has_more": true, // åé¢æ˜¯å¦è¿˜æœ‰æ›´å¤šé¡µæ•°ï¼ˆå¿…éœ€ï¼‰
  "results": [ // æœç´¢ç»“æœæ•°ç»„ï¼ˆå¿…éœ€ï¼‰
    {
      "comic_id": 114514, // æ¼«ç”»IDï¼ˆå¿…éœ€ï¼‰
      "title": "comicName", // æ¼«ç”»åç§°ï¼ˆå¿…éœ€ï¼‰
      "cover_url": "https://youapicover.domain", // æ¼«ç”»å°é¢ï¼ˆå¿…éœ€ï¼Œå®½è¦æ§åˆ¶åœ¨200ä»¥å†…ï¼Œä¸ç„¶æ‰‹ç¯ä¼šç‚¸æ‰ï¼‰
      "pages": 24 // é¡µæ•°ï¼ˆå¯é€‰ï¼Œç”¨äºåœ¨æœç´¢ç»“æœä¸­æ˜¾ç¤ºï¼‰
    }
  ]
}
```

### 3. è¯·æ±‚å¤´è¯´æ˜ï¼ˆ1.8ç‰ˆæœ¬æ·»åŠ ï¼‰

æ‰€æœ‰APIè¯·æ±‚éƒ½ä¼šæºå¸¦ä»¥ä¸‹è¯·æ±‚å¤´ï¼š

```
User-Agent: packageName(versionName(versionCode))/product/brand/osType/osVersionName/osVersionCode/language/region
```

ä¾‹å¦‚ï¼š
```
User-Agent: moe.yzf.comic(1.8(114))/Xiaomi Smart Band 9 Pro/Vela/NuttX/10.3.0/656128/zh/CN
```

ä½ å¯ä»¥æ ¹æ®è¿™ä¸ªè¯·æ±‚å¤´æ¥åˆ¤æ–­ç”¨æˆ·ä½¿ç”¨çš„æ˜¯å“ªä¸ªè®¾å¤‡ï¼Œä»è€Œæ ¹æ®è®¾å¤‡çš„æ€§èƒ½æ¥è°ƒæ•´å›¾ç‰‡çš„å°ºå¯¸å’Œè´¨é‡ã€‚

### 4. Cookieæ”¯æŒï¼ˆ1.8ç‰ˆæœ¬æ·»åŠ ï¼‰

å¦‚æœæ¼«ç”»æºéœ€è¦Cookieè®¤è¯ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡è®¾å¤‡äº’è”åŠŸèƒ½ä¸Šä¼ Cookieã€‚Cookieä¼šä»¥JSONæ ¼å¼å­˜å‚¨ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

```json5
{
  "sourceName": "cookie_value"
}
```

å…¶ä¸­ `sourceName` å¯¹åº”é…ç½®æ–‡ä»¶ä¸­çš„æ¼«ç”»æºåç§°ã€‚è¯·æ±‚æ—¶ä¼šè‡ªåŠ¨æ·»åŠ  `Cookie` è¯·æ±‚å¤´ã€‚

#### å¦‚ä½•ä½¿ç”¨ è…•ä¸Šæ¼«ç”»åŒæ­¥å™¨ æ’ä»¶ä¸Šä¼  Cookie

æˆ‘ä»¬æä¾›äº† **è…•ä¸Šæ¼«ç”»åŒæ­¥å™¨** æ’ä»¶æ¥ç®€åŒ– Cookie çš„ä¸Šä¼ æµç¨‹ï¼š

1. **å®‰è£…æ’ä»¶**
   - åœ¨ AstroBox çš„æ’ä»¶å¸‚åœºä¸­æœç´¢å¹¶å®‰è£… **è…•ä¸Šæ¼«ç”»åŒæ­¥å™¨** æ’ä»¶

2. **è·å– Cookie**

   > è¿™é‡Œä¸åŒæ¼«ç”»æºå¯¹Cookieçš„è¦æ±‚ä¸åŒï¼Œæœ€å¥½æŒ‰ç…§å¯¹åº”æ¼«ç”»æºçš„è¦æ±‚æ¥è·å–Cookieï¼Œåœ¨è¿™é‡Œå†™ä¸€èˆ¬é€šç”¨çš„æƒ…å†µ

   - åœ¨ç”µè„‘æµè§ˆå™¨ä¸­æ‰“å¼€ä½ çš„æ¼«ç”»æºç½‘ç«™
   - ç™»å½•è´¦å·ï¼ˆå¦‚æœéœ€è¦ï¼‰
   - æŒ‰ `F12` æ‰“å¼€å¼€å‘è€…å·¥å…· â†’ åˆ‡æ¢åˆ° **Networkï¼ˆç½‘ç»œï¼‰** æ ‡ç­¾
   - åˆ·æ–°é¡µé¢ï¼Œç‚¹å‡»ä»»æ„ä¸€ä¸ªè¯·æ±‚
   - åœ¨è¯·æ±‚å¤´ä¸­æ‰¾åˆ° `Cookie` å­—æ®µï¼Œå¤åˆ¶å…¶å€¼

3. **ä½¿ç”¨æ’ä»¶ä¸Šä¼ **
   - æ‰“å¼€ AstroBox çš„ **è…•ä¸Šæ¼«ç”»åŒæ­¥å™¨** æ’ä»¶
   - **æ¼«ç”»æºåŸŸå**ï¼šè¾“å…¥ä½ çš„æ¼«ç”»æºåœ°å€ï¼Œä¾‹å¦‚ `https://youapi.domain`
   - æ’ä»¶ä¼šè‡ªåŠ¨è·å–æ¼«ç”»æºåç§°å¹¶æ˜¾ç¤ºåœ¨**æ¼«ç”»æºåç§°**å­—æ®µ
   - **Cookie**ï¼šç²˜è´´ä»æµè§ˆå™¨å¤åˆ¶çš„ Cookie å€¼
   - ç‚¹å‡»**åŒæ­¥åˆ°æ‰‹è¡¨**æŒ‰é’®

4. **å®Œæˆ**
   - æ’ä»¶ä¼šè‡ªåŠ¨å°† Cookie å‘é€åˆ°æ‰‹è¡¨ä¸Šçš„è…•ä¸Šæ¼«ç”»åº”ç”¨
   - ä¹‹åè®¿é—®è¯¥æ¼«ç”»æºæ—¶ï¼Œè¯·æ±‚ä¼šè‡ªåŠ¨æºå¸¦ Cookie

## éƒ¨åˆ†å¯ç›´æ¥æ‹¿æ¥éƒ¨ç½²çš„æ¼«ç”»æºæºä»£ç 

> é‰´äºå¤§éƒ¨åˆ†ç”¨æˆ·æ²¡æœ‰å†™ä»£ç çš„ç»å†ï¼Œä»¥åŠä¸ªäººåŸå› æ— æ³•ä¿è¯æ‰€æœ‰çš„æ¼«ç”»æºå¯ç”¨ï¼ˆä¸è¦è®©æˆ‘å€’è´´é’±ç»´æŠ¤æœåŠ¡å™¨ğŸ˜­ï¼‰
> 
> åœ¨è¿™é‡Œä¼˜å…ˆæ¨èå„ä½ç”¨æˆ·æ­å»ºè‡ªå·±çš„è‡ªå®šä¹‰æ¼«ç”»æº
>
> æ­å»ºæ–¹æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¸€ä¸ªVercelè´¦å·ä»¥åŠä¸€ä¸ªè‡ªå·±çš„åŸŸåå³å¯

é€‰æ‹©ä¸‹é¢å¯ç”¨çš„ä»“åº“æŒ‰ç…§æŒ‡å¼•éƒ¨ç½²å³å¯å¿«é€Ÿæ­å»ºå¥½å¯ç”¨çš„æ¼«ç”»æºï¼Œä¸è¿‡å…¶ä¸­çš„åŸŸåæ˜¯æ— æ³•è®¿é—®çš„ï¼Œéœ€è¦æœç´¢Vercelå¦‚ä½•ç»‘å®šè‡ªå®šä¹‰åŸŸåæ‰å¯ä»¥ä½¿ç”¨

### jmcomic API

[![sf-yuzifu/vercel-flask-jmcomic-api - GitHub](https://gh-card.dev/repos/sf-yuzifu/vercel-flask-jmcomic-api.svg)](https://github.com/sf-yuzifu/vercel-flask-jmcomic-api)

### ehentai API

[![sf-yuzifu/vela-py-eh-api-server - GitHub](https://gh-card.dev/repos/sf-yuzifu/vela-py-eh-api-server.svg)](https://github.com/sf-yuzifu/vela-py-eh-api-server)
